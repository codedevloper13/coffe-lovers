/** @format */

import Head from "next/head";
import Image from "next/image";
import styles from "../styles/Home.module.css";
import Banner from "../components/banner";
import Card from "../components/Card";
import CoffeeStoresData from "../data/coffee-stores.json";

export async function getStaticProps(context) {
	const options = {
		method: "GET",
		headers: {
			accept: "application/json",
			Authorization: "fsq3Vb/kHNyYdLgRIqC3pp/oPxjbH8yx8Pfvep4i8VETcH0=",
		},
	};

	fetch("https://api.foursquare.com/v3/places/search", options)
		.then((response) => response.json())
		.then((response) => console.log(response))
		.catch((err) => console.error(err));
	return {
		props: {
			CoffeeStores: CoffeeStoresData,
		},
	};
}

export default function Home(props) {
	const handleOnBannerBtnClick = () => {
		alert("hello");
	};

	return (
		<div className={styles.container}>
			<Head>
				<title>Coffee Lovers</title>
				<meta name='description' content='Generated by create next app' />
				<link rel='icon' href='/favicon.ico' />
			</Head>

			<main className={styles.main}>
				<Banner buttonText='View Stores Nearby' handleOnClick={handleOnBannerBtnClick} />
				<div className={styles.heroImage}>
					<Image src='/static/hero-banner.png' alt='banner' width={700} height={300} />
				</div>
				{props.CoffeeStores.length > 0 && (
					<>
						<h2 className={styles.headingtwo}>Torronto Stores</h2>
						<div className={styles.cardLayout}>
							{props.CoffeeStores.map((CoffeeStore) => {
								return (
									<Card
										key={CoffeeStore.id}
										className={styles.card}
										name={CoffeeStore.name}
										imgUrl={CoffeeStore.imgUrl}
										href={`/coffee-store/${CoffeeStore.id}`}
									/>
								);
							})}
						</div>
					</>
				)}
			</main>
		</div>
	);
}
